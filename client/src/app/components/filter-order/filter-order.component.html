<div class="filter-bar" [formGroup]="form">
  <!-- Search Input -->
  <div class="filter-group search-group">
    <div class="filter-input-wrapper">
      <i class="fa fa-search"></i>
      <input
        type="text"
        formControlName="name"
        placeholder="Search orders..."
        class="filter-input"
      />
    </div>
  </div>

  <!-- Order Type Toggle -->
  <div class="filter-group type-group">
    <app-toggle-group
      [options]="orderTypeOptions"
      [value]="form.get('orderType')?.value"
      (valueChange)="form.patchValue({ orderType: $event })"
    ></app-toggle-group>
  </div>

  <!-- Item Type Filters (Always visible) -->
  <div class="filter-group item-filters">
    <select class="filter-select" formControlName="family">
      <option [ngValue]="null">Family...</option>
      <option *ngFor="let family of getFamilies()" [ngValue]="family">{{ family }}</option>
    </select>

    <select class="filter-select" formControlName="category" *ngIf="selectedFamily">
      <option [ngValue]="null">Category...</option>
      <option *ngFor="let category of getCategories()" [ngValue]="category">{{ category }}</option>
    </select>
  </div>

  <!-- Weapon-specific Filters (Only for weapon family) -->
  <div class="filter-group weapon-filters" *ngIf="showAttributeFilter">
    <select class="filter-select" formControlName="attribute">
      <option [ngValue]="null">Attribute...</option>
      <option *ngFor="let attribute of attributes" [ngValue]="attribute">{{ attribute }}</option>
    </select>
  </div>

  <!-- Requirement Range (Only for weapon/unique families) -->
  <div class="filter-group req-group" *ngIf="showReqFilter">
    <span class="req-label">Req.</span>
    <input
      type="number"
      class="filter-input-small"
      formControlName="reqMin"
      min="0"
      max="13"
      placeholder="0"
    />
    <span class="req-separator">-</span>
    <input
      type="number"
      class="filter-input-small"
      formControlName="reqMax"
      min="0"
      max="13"
      placeholder="13"
    />
  </div>

  <!-- Upgrade-specific Filters (Only for upgrade family) -->
  <div class="filter-group upgrade-filters" *ngIf="showUpgradeFilters">
    <select class="filter-select" formControlName="core">
      <option [ngValue]="null">Inscription...</option>
      <option *ngFor="let core of getCores()" [ngValue]="core">{{ core }}</option>
    </select>

    <select class="filter-select" formControlName="prefix">
      <option [ngValue]="null">Prefix...</option>
      <option *ngFor="let prefix of getPrefixes()" [ngValue]="prefix">{{ prefix }}</option>
    </select>

    <select class="filter-select" formControlName="suffix">
      <option [ngValue]="null">Suffix...</option>
      <option *ngFor="let suffix of getSuffixes()" [ngValue]="suffix">{{ suffix }}</option>
    </select>
  </div>
</div>
