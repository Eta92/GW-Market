<div class="player-modal font-fritz" (click)="$event.stopPropagation()">
  <!-- Modal Header -->
  <div class="modal-header">
    <div class="header-content">
      <div class="header-icon">
        <i class="fa fa-user-shield"></i>
      </div>
      <div class="header-title">
        <h2>Change Player</h2>
        <span class="header-subtitle">Set your active trading character</span>
      </div>
    </div>
    <button class="close-btn" (click)="closeEdit.emit()" title="Close">
      <i class="fa fa-times"></i>
    </button>
  </div>

  <!-- Modal Body -->
  <div class="modal-body" [formGroup]="form">
    <!-- Player Name Input -->
    <div class="form-section">
      <label class="section-label">Active Player Name</label>
      <div class="input-wrapper">
        <i class="fa fa-user input-icon"></i>
        <input type="text" class="form-input" placeholder="Enter your in-game character name" formControlName="name" />
      </div>
      <p class="input-hint">
        <i class="fa fa-info-circle"></i>
        To get the certified badge, verify your character below
      </p>
    </div>

    <!-- Certification Section -->
    <div class="cert-section">
      <div class="cert-header">
        <i class="fa fa-certificate"></i>
        <span>Character Certification</span>
      </div>

      <!-- <div class="p-3 text-white bg-red-600 rounded-lg secret-display">
        <i class="fa fa-exclamation-triangle"></i>
        Character certification is currently disabled.<br />
        <span class="text-xs">Guild Wars update broke our current code and we need some time to repair it.</span>
      </div> -->

      <!-- Certify Button -->
      <button class="cert-btn" (click)="addPlayer()">
        <i class="fa fa-plus-circle"></i>
        <span>Certify a New Character</span>
      </button>

      <!-- Secret Code Display -->
      <div class="secret-display" *ngIf="secret">
        <label class="secret-label">
          <i class="fa fa-key"></i>
          Copy this whisper command in-game to verify
        </label>
        <div class="secret-input-group">
          <input type="text" class="secret-input" [value]="secret" readonly />
          <button class="copy-btn" (click)="copySecret()" title="Copy to clipboard">
            <i class="fa fa-copy"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Certified Characters -->
    <div class="certified-section">
      <div class="certified-header">
        <i class="fa fa-shield-check"></i>
        <span>Certified Characters</span>
        <span class="char-count" *ngIf="shop?.certified?.length">({{ shop?.certified.length }})</span>
      </div>

      <div class="empty-state" *ngIf="!shop?.certified?.length">
        <i class="fa fa-user-slash"></i>
        <p>You haven't certified any characters yet</p>
        <span>Click "Certify a New Character" above to get started</span>
      </div>

      <div class="char-grid" *ngIf="shop?.certified?.length">
        <button
          class="char-btn"
          *ngFor="let name of shop?.certified"
          [class.active]="form.get('name')?.value === name"
          (click)="form.patchValue({ name: name })"
        >
          <div class="char-radio">
            <i
              class="fa"
              [class.fa-circle]="form.get('name')?.value !== name"
              [class.fa-circle-dot]="form.get('name')?.value === name"
            ></i>
          </div>
          <span class="char-name">{{ name }}</span>
          <i class="fa fa-certificate char-badge"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Footer -->
  <div class="modal-footer">
    <button class="cancel-btn" (click)="closeEdit.emit()">
      <i class="fa fa-times"></i>
      Cancel
    </button>
    <button class="confirm-btn" (click)="onConfirmPlayer()">
      <i class="fa fa-check"></i>
      Confirm Player
    </button>
  </div>
</div>
